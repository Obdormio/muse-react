{"version":3,"sources":["muse/MuseConfig.ts","muse/Dimens.ts","muse/Border.tsx","muse/Selector.ts","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MuseConfig","noteHeight","noteWidth","noteFontSize","noteFontFamily","sigFontSize","trackGap","lineGap","pointGap","tailPointGap","pointRound","pageE","notationWidth","pageMarginHorizontal","pageMarginVertical","infoTitleFontSize","infoSubtitleFontSize","infoGap","infoFontSize","pageIndexFontSize","textFontFamily","Dimens","x","y","width","height","marginTop","marginBottom","marginLeft","marginRight","this","marginHorizontal","marginVertical","d","border","clazz","show","color","ifShow","className","transform","stroke","strokeWidth","fill","outerBorder","Selector","fun","l","document","addEventListener","ev","console","log","g","clear","push","setSelect","forEach","it","length","instance","Note","o","config","n","noteGroup","p","dx","notesY","pointsY","tailPointsX","dimens","undefined","generateGroup","ny","mb","py","idx","t","i","h","split","charCodeAt","substr","charAt","MuseNote","props","useState","isSelect","note","setNote","onClick","getInstance","select","map","key","fontFamily","fontSize","S","F","DS","DF","N","r","pointGroup","tailPoint","Bar","notes","unitNum","notesX","baselineGroup","generateBaseline","Math","pow","q","s","e","MuseBar","bar","x1","y1","x2","y2","barLine","baseLine","Track","bars","MuseTrack","track","Line","tracks","MuseLine","line","lineHead","Page","lines","index","MusePage","page","textAnchor","toString","pageIndex","Notation","json","pages","title","subtitle","author","speed","rhythmic","C","JSON","parse","MuseNotation","notation","margin","y3","rythimic","notationInfo","init","data","hm","vm","w","notationH","pageIdx","linesHeight","lineYSpace","lineHeight","trackY","barsW","barIdx","barUnitSum","reduce","trackHeight","maxNoteHeight","maxNoteMarginBottom","barX","notesWidth","settle","noteMarginBootom","lineYUnit","Muse","App","state","errorA","errorB","isLoadedA","isLoadedB","a","b","url","fetch","then","res","text","result","setState","error","React","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.b9c0f11d.chunk.js","sourcesContent":["export default class MuseConfig {\n  noteHeight = 22;\n  noteWidth = 11;\n  noteFontSize = 22;\n  noteFontFamily = \"serif\";\n  sigFontSize = 14;\n\n  trackGap = 10;\n\n  lineGap = 20;\n\n  pointGap = 5;\n  tailPointGap = 8;\n  pointRound = 1.5;\n\n  pageE = 1.414;\n  notationWidth = 1000;\n  pageMarginHorizontal = 100;\n  pageMarginVertical = 110;\n\n  infoTitleFontSize = 34;\n  infoSubtitleFontSize = 22;\n  infoGap = 7;\n  infoFontSize = 20;\n\n  pageIndexFontSize = 20;\n\n  textFontFamily = \"serif\";\n}\n","export default class Dimens {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  marginTop: number;\n  marginBottom: number;\n  marginLeft: number;\n  marginRight: number;\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.marginBottom = 0;\n    this.marginTop = 0;\n    this.marginLeft = 0;\n    this.marginRight = 0;\n  }\n  init(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    marginHorizontal: number,\n    marginVertical: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.marginBottom = marginVertical;\n    this.marginTop = marginVertical;\n    this.marginLeft = marginHorizontal;\n    this.marginRight = marginHorizontal;\n  }\n  copyFrom(d: Dimens) {\n    this.x = d.x;\n    this.y = d.y;\n    this.width = d.width;\n    this.height = d.height;\n    this.marginBottom = d.marginBottom;\n    this.marginTop = d.marginTop;\n    this.marginLeft = d.marginLeft;\n    this.marginRight = d.marginRight;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\n\nexport function border(\n  d: Dimens,\n  clazz: string,\n  show: boolean = false,\n  color: string = \"blue\"\n) {\n  let ifShow = false;\n  if (show || ifShow) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + d.marginLeft + \",\" + d.marginTop + \")\"}\n        width={d.width}\n        height={d.height}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n\nexport function outerBorder(\n  d: Dimens,\n  clazz: string,\n  show: boolean = false,\n  color: string = \"gray\"\n) {\n  if (show) {\n    return (\n      <rect\n        className={clazz + \"__outer-border\"}\n        transform={\"translate(0,0)\"}\n        width={d.width + d.marginLeft + d.marginRight}\n        height={d.height + d.marginTop + d.marginBottom}\n        stroke={color}\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n","import { Note } from \"./MuseNote\";\n\ninterface T {\n  isSelect: Boolean;\n  setSelect: (s: boolean) => void;\n  note: Note;\n  setNote: (n: Note) => void;\n}\n\nclass Selector {\n  static instance: Selector;\n  fun: ((show: boolean) => void) | undefined;\n  l: T[] = [];\n  private constructor() {\n    document.addEventListener(\"keydown\", (ev) => {\n      console.log(ev);\n    });\n  }\n  static getInstance() {\n    if (!this.instance) {\n      this.instance = new Selector();\n    }\n    return this.instance;\n  }\n  select(g: T) {\n    this.clear();\n    this.l.push(g);\n    g.setSelect(true);\n  }\n  clear() {\n    this.l.forEach((it) => {\n      it.setSelect(false);\n    });\n    this.l.length = 0;\n  }\n}\n\nexport default Selector;\n","import React, { useState } from \"react\";\nimport Dimens from \"./Dimens\";\nimport { outerBorder } from \"./Border\";\nimport MuseConfig from \"./MuseConfig\";\nimport Selector from \"./Selector\";\n\nexport class Note {\n  config: MuseConfig;\n  n: string = \"\";\n  noteGroup: {\n    x: string;\n    n: string;\n    t: number;\n  }[] = [];\n  l: number = 0;\n  p: number = 0;\n  dx: number = 0;\n  notesY: number[] = [];\n  pointsY: number[] = [];\n  tailPointsX: number[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    if (o.n !== undefined) {\n      this.n = o.n;\n      this.generateGroup();\n      this.l = o.l;\n      this.p = o.p;\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  settle() {\n    let width =\n      this.dx + this.config.noteWidth + this.p * this.config.tailPointGap;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * this.config.pointGap;\n    let py = 0;\n    this.noteGroup.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            mb += x / 2;\n            this.pointsY.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = this.config.pointGap;\n            py += x / 2;\n            this.pointsY.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = this.config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = this.config.pointGap;\n          py += x / 2;\n          this.pointsY.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    for (let i = 0; i < this.p; ++i) {\n      this.tailPointsX.push(\n        this.dx + this.config.noteWidth + (i + 1 / 2) * this.config.tailPointGap\n      );\n    }\n    this.dimens.width = width;\n    this.dimens.height = ny;\n    this.dimens.marginBottom = mb;\n  }\n  generateGroup() {\n    let g = this.n.split(\"|\");\n    g.forEach((it) => {\n      for (let i = 0; i < it.length; ++i) {\n        if (\n          (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n          it.charCodeAt(i) === 45\n        ) {\n          let x = it.substr(0, i);\n          let n = it.charAt(i);\n          let t = it.substr(i + 1).length;\n          if (t !== 0 && it.charAt(i + 1) === \"-\") {\n            t = -t;\n          }\n          this.noteGroup.push({ x, n, t });\n          if (x !== \"\") {\n            this.dx = this.config.sigFontSize / 2;\n          }\n          break;\n        }\n      }\n    });\n  }\n}\n\nfunction castX(x: string) {\n  let m: Record<string, string> = {\n    S: \"#\",\n    F: \"b\",\n    DS: \"x\",\n    DF: \"d\",\n    N: \"n\",\n  };\n  return m[x] || \"\";\n}\n\nfunction noteGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-note\"}>\n      {note.noteGroup.map((it, idx) => {\n        return (\n          <g\n            className={clazz + \"__note-one\"}\n            key={idx}\n            width={note.dimens.width}\n            height={note.notesY[idx]}\n            transform={\n              \"translate(\" +\n              0 +\n              \",\" +\n              (note.dimens.height - note.notesY[idx]) +\n              \")\"\n            }\n          >\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.noteFontSize}\n              transform={\"translate(\" + note.dx + \",\" + 0 + \")\"}\n            >\n              {it.n}\n            </text>\n            <text\n              fontFamily={note.config.noteFontFamily}\n              fontSize={note.config.sigFontSize}\n              transform={\n                \"translate(\" +\n                0 +\n                \",\" +\n                (note.config.sigFontSize - note.config.noteHeight) +\n                \")\"\n              }\n            >\n              {castX(it.x)}\n            </text>\n          </g>\n        );\n      })}\n    </g>\n  );\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + note.config.noteWidth / 2) +\n            \",\" +\n            (note.dimens.height - it + note.config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={note.config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.dimens.height - note.config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseNote(props: { note: Note }) {\n  let [isSelect, setSelect] = useState(false);\n  let [note, setNote] = useState(props.note);\n  let d = props.note.dimens;\n  let clazz = \"muse-note\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n      onClick={() => {\n        Selector.getInstance().select({\n          isSelect: isSelect,\n          setSelect: setSelect,\n          note: note,\n          setNote: setNote,\n        });\n      }}\n    >\n      {outerBorder(d, clazz, isSelect, \"blue\")}\n      {noteGroup(props.note, clazz)}\n      {pointGroup(props.note, clazz)}\n      {tailPoint(props.note, clazz)}\n    </g>\n  );\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseNote, { Note } from \"./MuseNote\";\nimport { border } from \"./Border\";\n\nexport class Bar {\n  config: MuseConfig;\n  notes: Note[] = [];\n  dimens: Dimens = new Dimens();\n  unitNum: number = 0;\n  notesX: number[] = [];\n  baselineGroup: {\n    y: number;\n    s: number;\n    e: number;\n  }[] = [];\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: any) => {\n        this.notes.push(new Note(it, this.config));\n      });\n      this.generateBaseline();\n      this.notesX.push(1);\n      this.notes.forEach((note, idx) => {\n        let x = 0;\n        if (this.notes[idx + 1] === undefined) {\n          x += 1;\n        } else if (\n          this.notes[idx + 1] !== undefined &&\n          this.notes[idx + 1].l < note.l\n        ) {\n          x += Math.pow(2, -this.notes[idx + 1].l);\n        } else {\n          x += Math.pow(2, -note.l);\n        }\n        let q = 1;\n        for (let i = 1; i <= note.p; ++i) {\n          q += Math.pow(2, -i);\n        }\n        x *= q;\n        this.notesX.push(x);\n        this.unitNum += x;\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  generateBaseline() {\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n  }\n}\n\nfunction barLine(d: Dimens, clazz: string) {\n  return (\n    <line\n      className={clazz + \"__bar-line\"}\n      x1={d.marginLeft + d.width + d.marginRight}\n      y1={0}\n      x2={d.marginLeft + d.width + d.marginRight}\n      y2={d.height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n}\n\nfunction baseLine(bar: Bar, clazz: string) {\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {bar.baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={bar.notes[it.s].dimens.x}\n          y1={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          x2={bar.notes[it.e].dimens.x + bar.notes[it.e].dimens.width}\n          y2={bar.notes[it.s].dimens.height + (it.y + 1) * bar.config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseBar(props: { bar: Bar }) {\n  let d = props.bar.dimens;\n  let clazz = \"muse-bar\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {barLine(d, clazz)}\n      {baseLine(props.bar, clazz)}\n      {props.bar.notes.map((it, idx) => (\n        <MuseNote note={it} key={idx} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseBar, { Bar } from \"./MuseBar\";\nimport { border } from \"./Border\";\n\nexport class Track {\n  config: MuseConfig;\n  bars: Bar[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(o:any, config: MuseConfig) {\n    this.config = config;\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any) => {\n        this.bars.push(new Bar(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction MuseTrack(props: { track: Track }) {\n  let d = props.track.dimens;\n  let clazz = \"muse-track\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {props.track.bars.map((it, idx) => (\n        <MuseBar bar={it} key={idx} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseTrack, { Track } from \"./MuseTrack\";\nimport { border } from \"./Border\";\n\nexport class Line {\n  config: MuseConfig;\n  tracks: Track[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(o:any, config: MuseConfig) {\n    this.config = config;\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: any) => {\n        this.tracks.push(new Track(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction lineHead(d: Dimens, clazz: string) {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={d.height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n}\n\nfunction MuseLine(props: { line: Line }) {\n  let d = props.line.dimens;\n  let clazz = \"muse-line\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {lineHead(d, clazz)}\n      {props.line.tracks.map((it, idx) => (\n        <MuseTrack track={it} key={idx} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MuseLine, { Line } from \"./MuseLine\";\nimport { border, outerBorder } from \"./Border\";\n\nexport class Page {\n  config: MuseConfig;\n  lines: Line[] = [];\n  dimens: Dimens = new Dimens();\n  index: number = 0;\n  constructor(o: any, config: MuseConfig) {\n    this.config = config;\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: any) => {\n        this.lines.push(new Line(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction pageIndex(idx: number, d: Dimens, clazz: string, config: MuseConfig) {\n  return (\n    <g\n      className={clazz + \"__page-index\"}\n      transform={\n        \"translate(\" +\n        (d.marginLeft + d.width / 2) +\n        \",\" +\n        (d.marginTop + d.height + d.marginBottom / 2) +\n        \")\"\n      }\n    >\n      <text\n        textAnchor={\"middle\"}\n        fontFamily={config.textFontFamily}\n        fontSize={config.pageIndexFontSize}\n      >\n        {idx.toString()}\n      </text>\n    </g>\n  );\n}\n\nfunction MusePage(props: { page: Page }) {\n  let d = props.page.dimens;\n  let clazz = \"muse-page\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {outerBorder(d, clazz)}\n      {pageIndex(props.page.index, d, clazz, props.page.config)}\n      {props.page.lines.map((it, idx) => (\n        <MuseLine line={it} key={idx} />\n      ))}\n    </g>\n  );\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport Dimens from \"./Dimens\";\nimport MusePage, { Page } from \"./MusePage\";\nimport { border } from \"./Border\";\n\nexport class Notation {\n  config: MuseConfig;\n  pages: Page[] = [];\n  title: string = \"\";\n  subtitle: string = \"\";\n  author: string[] = [];\n  speed: string = \"\";\n  rhythmic: string = \"\";\n  C: string = \"\";\n  dimens: Dimens = new Dimens();\n  constructor(json: string, config: MuseConfig) {\n    this.config = config;\n    let o: any = JSON.parse(json);\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: any) => {\n        this.pages.push(new Page(it, this.config));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n    if (o.title !== undefined) {\n      this.title = o.title;\n    }\n    if (o.subtitle !== undefined) {\n      this.subtitle = o.subtitle;\n    }\n    if (o.author !== undefined) {\n      this.author = o.author.toString().split(\"|\");\n    }\n    if (o.speed !== undefined) {\n      this.speed = o.speed;\n    }\n    if (o.rhythmic) {\n      this.rhythmic = o.rhythmic;\n    }\n    if (o.C) {\n      this.C = \"1=\" + o.C;\n    }\n  }\n}\n\nfunction notationInfo(notation: Notation, clazz: string) {\n  let config = notation.config;\n  let y = 0;\n  y += config.pageMarginVertical;\n  let title = (\n    <text\n      className={clazz + \"__info-title\"}\n      fontFamily={config.textFontFamily}\n      width={notation.dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoTitleFontSize}\n      transform={\n        \"translate(\" +\n        (notation.dimens.marginLeft + notation.dimens.width / 2) +\n        \",\" +\n        y +\n        \")\"\n      }\n    >\n      {notation.title}\n    </text>\n  );\n  y += config.infoTitleFontSize + config.infoGap;\n  let subtitle = (\n    <text\n      className={clazz + \"__info-subtitle\"}\n      fontFamily={config.textFontFamily}\n      width={notation.dimens.width}\n      textAnchor={\"middle\"}\n      fontSize={config.infoSubtitleFontSize}\n      transform={\n        \"translate(\" +\n        (notation.dimens.marginLeft + notation.dimens.width / 2) +\n        \",\" +\n        y +\n        \")\"\n      }\n    >\n      {notation.subtitle}\n    </text>\n  );\n  let y1 = y;\n  let x = notation.author.length;\n  let author = (\n    <g className={clazz + \"__info-author\"}>\n      {notation.author.map((it, idx) => {\n        y1 += config.infoFontSize + config.infoGap;\n        if (idx < x - 2) {\n          y += config.infoFontSize + config.infoGap;\n        }\n        return (\n          <text\n            key={idx}\n            fontFamily={config.textFontFamily}\n            width={notation.dimens.width}\n            fontSize={config.infoFontSize}\n            textAnchor={\"end\"}\n            x={0}\n            transform={\n              \"translate(\" +\n              (notation.dimens.width - config.pageMarginHorizontal) +\n              \",\" +\n              y1 +\n              \")\"\n            }\n          >\n            {it}\n          </text>\n        );\n      })}\n    </g>\n  );\n  let y2 = y + (config.infoGap + config.infoSubtitleFontSize);\n  let y3 = y2 + (config.infoGap + config.infoFontSize);\n  let rythimic = (\n    <g className={clazz + \"__info-rythmic\"} width={notation.dimens.width}>\n      <text\n        fontFamily={config.textFontFamily}\n        width={notation.dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y2 + \")\"}\n      >\n        {notation.speed}\n      </text>\n      <text\n        fontFamily={config.textFontFamily}\n        width={notation.dimens.width}\n        fontSize={config.infoFontSize}\n        transform={\"translate(\" + config.pageMarginHorizontal + \",\" + y3 + \")\"}\n      >\n        {notation.C + \" \" + notation.rhythmic}\n      </text>\n    </g>\n  );\n  return (\n    <g className={clazz + \"__info\"} width={notation.dimens.width}>\n      {title}\n      {subtitle}\n      {author}\n      {rythimic}\n    </g>\n  );\n}\n\nfunction MuseNotation(props: { notation: Notation }) {\n  let margin = 10;\n  let d = props.notation.dimens;\n  let clazz = \"muse-notation\";\n  return (\n    <svg\n      className=\"muse\"\n      width={props.notation.dimens.width + margin * 2}\n      height={props.notation.dimens.height + margin * 2}\n    >\n      <g\n        className={clazz}\n        transform={\"translate(\" + margin + \",\" + margin + \")\"}\n        width={props.notation.dimens.width}\n        height={props.notation.dimens.height}\n      >\n        {border(d, clazz)}\n        {notationInfo(props.notation, clazz)}\n        {props.notation.pages.map((it, idx) => (\n          <MusePage page={it} key={idx} />\n        ))}\n      </g>\n    </svg>\n  );\n}\n\nexport default MuseNotation;\n","import React from \"react\";\nimport MuseConfig from \"./MuseConfig\";\nimport MuseNotation, { Notation } from \"./MuseNotation\";\n\nfunction init(data: string, config: MuseConfig): Notation {\n  let hm = config.pageMarginHorizontal;\n  let vm = config.pageMarginVertical;\n  let w = config.notationWidth - hm * 2;\n  let h = config.notationWidth * config.pageE - vm * 2;\n  let notation = new Notation(data, config);\n  let notationH = 0;\n  notation.pages.forEach((page, pageIdx) => {\n    page.dimens.x = hm;\n    page.dimens.y = vm * (pageIdx + 1) + (vm + h) * pageIdx;\n    page.dimens.width = w;\n    page.dimens.marginLeft = hm;\n    page.dimens.marginRight = hm;\n    page.dimens.height = h;\n    page.dimens.marginTop = vm;\n    page.dimens.marginBottom = vm;\n    if (pageIdx === 0) {\n      let x = 0;\n      x += config.infoTitleFontSize + config.infoGap;\n      x += config.infoSubtitleFontSize + config.infoGap;\n      x += notation.author.length * (config.infoFontSize + config.infoGap);\n      page.dimens.marginTop += x;\n      page.dimens.height -= x;\n      page.dimens.y += x;\n    }\n    page.index = pageIdx + 1;\n    notationH +=\n      page.dimens.marginTop + page.dimens.marginBottom + page.dimens.height;\n    let linesHeight: number[] = [];\n    let lineYSpace = page.dimens.height;\n    page.lines.forEach((line) => {\n      line.dimens.width = page.dimens.width;\n      line.dimens.x = page.dimens.marginLeft;\n      let lineHeight = 0;\n      let trackY = 0;\n      let barsW: number[] = [];\n      line.tracks.forEach((track) => {\n        track.bars.forEach((bar, barIdx) => {\n          if (barsW[barIdx] !== undefined) {\n            barsW[barIdx] =\n              barsW[barIdx] > bar.unitNum ? barsW[barIdx] : bar.unitNum;\n          } else {\n            barsW.push(bar.unitNum);\n          }\n        });\n      });\n      let barUnitSum = barsW.reduce((s, it) => s + it);\n      line.tracks.forEach((track) => {\n        let trackHeight = 0;\n        track.dimens.y = trackY;\n        track.dimens.width = line.dimens.width;\n        let maxNoteHeight = 0; //最大note.y\n        let maxNoteMarginBottom = 0;\n        let barX = 0;\n        track.bars.forEach((bar, barIdx) => {\n          bar.unitNum = barsW[barIdx];\n          bar.dimens.width = (barsW[barIdx] / barUnitSum) * track.dimens.width;\n          bar.dimens.x = barX;\n          barX += bar.dimens.width;\n          let notesWidth: number[] = [];\n          bar.notes.forEach((note) => {\n            note.settle();\n            let noteWidth = note.dimens.width;\n            let noteHeight = note.dimens.height;\n            let noteMarginBootom = note.dimens.marginBottom;\n            maxNoteHeight =\n              maxNoteHeight > noteHeight ? maxNoteHeight : noteHeight;\n            maxNoteMarginBottom =\n              maxNoteMarginBottom > noteMarginBootom\n                ? maxNoteMarginBottom\n                : noteMarginBootom;\n            notesWidth.push(noteWidth);\n          });\n          let x = 0;\n          bar.notes.forEach((note, idx) => {\n            x += (bar.notesX[idx] / (bar.unitNum + 1)) * bar.dimens.width;\n            note.dimens.x = x - config.noteWidth / 2 - note.dx;\n          });\n        });\n        track.dimens.height = maxNoteHeight + maxNoteMarginBottom;\n        track.bars.forEach((bar) => {\n          bar.dimens.height = track.dimens.height;\n          bar.notes.forEach((note) => {\n            note.dimens.height = maxNoteHeight;\n            note.dimens.marginBottom = maxNoteMarginBottom;\n          });\n        });\n        trackHeight = maxNoteHeight + maxNoteMarginBottom;\n        lineHeight += trackHeight + config.trackGap;\n        trackY += trackHeight + config.trackGap;\n      });\n      lineHeight -= config.trackGap;\n      line.dimens.height = lineHeight;\n      lineYSpace -= lineHeight;\n      linesHeight.push(lineHeight);\n    });\n    let lineYUnit = lineYSpace / (page.lines.length - 1);\n    page.lines.forEach((line, idx) => {\n      let py = page.dimens.marginTop;\n      for (let i = 0; i < idx; ++i) {\n        py += lineYUnit + linesHeight[i];\n      }\n      line.dimens.y = py;\n    });\n  });\n  notation.dimens.width = w + 2 * hm;\n  notation.dimens.height = notationH;\n  return notation;\n}\n\nfunction Muse(props: { data: string; config?: MuseConfig }) {\n  return (\n    <MuseNotation\n      notation={init(\n        props.data,\n        props.config ? props.config : new MuseConfig()\n      )}\n    />\n  );\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  {\n    errorA: any | null;\n    errorB: any | null;\n    isLoadedA: boolean;\n    isLoadedB: boolean;\n    a: string;\n    b: string;\n  }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      errorA: null,\n      errorB: null,\n      isLoadedA: false,\n      isLoadedB: false,\n      a: \"\",\n      b: \"\",\n    };\n  }\n\n  componentDidMount() {\n    let url = \"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/data/\";\n    //let url = \"http://localhost:8888/\";\n    fetch(url + \"a.json\")\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoadedA: true,\n            a: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoadedA: true,\n            errorA: error,\n          });\n        }\n      );\n    fetch(url + \"b.json\")\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoadedB: true,\n            b: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoadedB: true,\n            errorB: error,\n          });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <h2>Example A</h2>\n        {this.state.isLoadedA ? (\n          this.state.errorA ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.a} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n        <h2>Example B</h2>\n        {this.state.isLoadedB ? (\n          this.state.errorB ? (\n            \"error\"\n          ) : (\n            <Muse data={this.state.b} />\n          )\n        ) : (\n          \"loading...\"\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}