{"version":3,"sources":["muse/config.ts","muse/Dimens.ts","muse/untils.tsx","muse/MuseNote.tsx","muse/MuseBar.tsx","muse/MuseTrack.tsx","muse/MuseLine.tsx","muse/MusePage.tsx","muse/MuseNotation.tsx","muse/Muse.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Dimens","x","y","width","height","marginTop","marginBottom","marginLeft","marginRight","this","marginHorizontal","marginVertical","d","border","clazz","show","ifShow","className","transform","stroke","strokeWidth","fill","Note","json","n","noteGroup","l","p","dx","notesY","pointsY","tailPointsX","dimens","o","JSON","parse","undefined","generateGroup","stringify","config","ny","mb","py","forEach","it","idx","t","i","push","split","length","charCodeAt","substr","charAt","MuseNote","props","note","map","key","fontFamily","fontSize","r","pointGroup","tailPoint","Bar","notes","unitNum","notesX","baselineGroup","generateBaseline","Math","pow","s","e","MuseBar","bar","x1","y1","x2","y2","barLine","baseLine","Track","bars","MuseTrack","track","Line","tracks","MuseLine","line","lineHead","Page","lines","MusePage","page","outerBorder","Notation","pages","MuseNotation","notation","margin","init","data","notationH","pageIdx","linesHeight","lineYSpace","lineHeight","trackY","barsW","barIdx","barUnitSum","reduce","trackHeight","maxNoteHeight","maxNoteMarginBottom","barX","notesWidth","settle","noteWidth","noteHeight","noteMarginBootom","console","log","lineYUnit","w","Muse","App","state","error","isLoaded","fetch","then","res","text","result","setState","React","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.5a3fcfac.chunk.js","sourcesContent":["export default {\n  noteHeight: 22,\n  noteWidth: 11,\n  noteFontSize: 22,\n  noteFontFamily: \"serif\",\n\n  trackGap: 10,\n\n  lineGap: 20,\n\n  pointGap: 5,\n  tailPointGap: 8,\n  pointRound: 1.5,\n};\n","export default class Dimens {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  marginTop: number;\n  marginBottom: number;\n  marginLeft: number;\n  marginRight: number;\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.marginBottom = 0;\n    this.marginTop = 0;\n    this.marginLeft = 0;\n    this.marginRight = 0;\n  }\n  init(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    marginHorizontal: number,\n    marginVertical: number\n  ) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.marginBottom = marginVertical;\n    this.marginTop = marginVertical;\n    this.marginLeft = marginHorizontal;\n    this.marginRight = marginHorizontal;\n  }\n  copyFrom(d: Dimens) {\n    this.x = d.x;\n    this.y = d.y;\n    this.width = d.width;\n    this.height = d.height;\n    this.marginBottom = d.marginBottom;\n    this.marginTop = d.marginTop;\n    this.marginLeft = d.marginLeft;\n    this.marginRight = d.marginRight;\n  }\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\n\nexport function border(d: Dimens, clazz: string, show: boolean = false) {\n  let ifShow = false;\n  if (show || ifShow) {\n    return (\n      <rect\n        className={clazz + \"__border\"}\n        transform={\"translate(\" + d.marginLeft + \",\" + d.marginTop + \")\"}\n        width={d.width}\n        height={d.height}\n        stroke=\"blue\"\n        strokeWidth=\"0.4\"\n        fill=\"none\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n}\n\nexport function outerBorder(d: Dimens, clazz: string) {\n  return (\n    <rect\n      className={clazz + \"__outer-border\"}\n      transform={\"translate(0,0)\"}\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n      stroke=\"gray\"\n      strokeWidth=\"0.4\"\n      fill=\"none\"\n    />\n  );\n}\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport { border } from \"./untils\";\nimport \"./config\";\nimport config from \"./config\";\n\nexport class Note {\n  n: string = \"\";\n  noteGroup: {\n    x: string;\n    n: string;\n    t: number;\n  }[] = [];\n  l: number = 0;\n  p: number = 0;\n  dx: number = 0;\n  notesY: number[] = [];\n  pointsY: number[] = [];\n  tailPointsX: number[] = [];  parse(json: string): void {\n    \n  }\n  stringify(): string {\n    return JSON.stringify(this);\n  }\n  dimens: Dimens = new Dimens();\n  constructor(json: string) {\n    let o: any = JSON.parse(json);\n    if (o.n !== undefined) {\n      this.n = o.n;\n      this.generateGroup();\n      this.l = o.l;\n      this.p = o.p;\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  settle() {\n    let width = this.dx + config.noteWidth + this.p * config.tailPointGap;\n    let ny = 0;\n    let mb = 0;\n    mb += this.l * config.pointGap;\n    let py = 0;\n    this.noteGroup.forEach((it, idx) => {\n      if (it.t < 0) {\n        if (idx === 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = config.pointGap;\n            mb += x / 2;\n            this.pointsY.push(-mb);\n            mb += x / 2;\n          }\n        }\n        if (idx !== 0) {\n          let i = -it.t;\n          for (; i > 0; --i) {\n            let x = config.pointGap;\n            py += x / 2;\n            this.pointsY.push(py);\n            py += x / 2;\n            ny += x;\n          }\n        }\n      }\n      this.notesY.push(ny);\n      let h = config.noteHeight;\n      ny += h;\n      py += h;\n      if (it.t > 0) {\n        let i = it.t;\n        for (; i > 0; --i) {\n          let x = config.pointGap;\n          py += x / 2;\n          this.pointsY.push(py);\n          py += x / 2;\n          ny += x;\n        }\n      }\n    });\n    for (let i = 0; i < this.p; ++i) {\n      this.tailPointsX.push(\n        this.dx + config.noteWidth + (i + 1 / 2) * config.tailPointGap\n      );\n    }\n    this.dimens.width = width;\n    this.dimens.height = ny;\n    this.dimens.marginBottom = mb;\n  }\n  generateGroup() {\n    let g = this.n.split(\"|\");\n    g.forEach((it) => {\n      for (let i = 0; i < it.length; ++i) {\n        if (\n          (it.charCodeAt(i) <= 57 && it.charCodeAt(i) >= 48) ||\n          it.charCodeAt(i) === 45\n        ) {\n          let x = it.substr(0, i);\n          let n = it.charAt(i);\n          let t = it.substr(i + 1).length;\n          if (t !== 0 && it.charAt(i + 1) === \"-\") {\n            t = -t;\n          }\n          this.noteGroup.push({ x, n, t });\n          if (x !== \"\") {\n            this.dx = config.noteWidth;\n          }\n          break;\n        }\n      }\n    });\n  }\n}\n\nfunction castX(x: string) {\n  if (x === \"S\") {\n    return \"#\";\n  } else if (x === \"F\") {\n    return \"b\";\n  } else if (x === \"DS\") {\n    return \"x\";\n  } else if (x === \"DF\") {\n    return \"d\";\n  } else if (x === \"N\") {\n    return \"n\";\n  } else {\n    return \"\";\n  }\n}\n\nfunction noteGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-note\"}>\n      {note.noteGroup.map((it, idx) => {\n        return (\n          <g\n            className={clazz + \"__note-one\"}\n            key={it.n + idx + it.x}\n            width={note.dimens.width}\n            height={note.notesY[idx]}\n            transform={\n              \"translate(\" +\n              0 +\n              \",\" +\n              (note.dimens.height - note.notesY[idx]) +\n              \")\"\n            }\n          >\n            <text\n              fontFamily={config.noteFontFamily}\n              fontSize={config.noteFontSize}\n              transform={\"translate(\" + note.dx + \",\" + 0 + \")\"}\n            >\n              {it.n}\n            </text>\n            <text\n              fontFamily={config.noteFontFamily}\n              fontSize={config.noteFontSize}\n            >\n              {castX(it.x)}\n            </text>\n          </g>\n        );\n      })}\n    </g>\n  );\n}\n\nfunction pointGroup(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__group-point\"}>\n      {note.pointsY.map((it, idx) => (\n        <circle\n          key={idx}\n          r={config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            (note.dx + config.noteWidth / 2) +\n            \",\" +\n            (note.dimens.height - it + config.pointGap / 2) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction tailPoint(note: Note, clazz: string) {\n  return (\n    <g className={clazz + \"__tail-point\"}>\n      {note.tailPointsX.map((it, idx) => (\n        <circle\n          key={idx}\n          r={config.pointRound}\n          fill=\"black\"\n          transform={\n            \"translate(\" +\n            it +\n            \",\" +\n            (note.dimens.height - config.noteHeight / 3) +\n            \")\"\n          }\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseNote(props: { note: Note }) {\n  let d = props.note.dimens;\n  let clazz = \"muse-note\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {noteGroup(props.note, clazz)}\n      {pointGroup(props.note, clazz)}\n      {tailPoint(props.note, clazz)}\n    </g>\n  );\n}\n\nexport default MuseNote;\n","import React from \"react\";\nimport config from \"./config\";\nimport Dimens from \"./Dimens\";\nimport MuseNote, { Note } from \"./MuseNote\";\nimport { border } from \"./untils\";\n\nexport class Bar {\n  notes: Note[] = [];\n  dimens: Dimens = new Dimens();\n  unitNum: number = 0;\n  notesX: number[] = [];\n  baselineGroup: {\n    y: number;\n    s: number;\n    e: number;\n  }[] = [];\n  constructor(json: string) {\n    let o = JSON.parse(json);\n    if (o.notes !== undefined) {\n      o.notes.forEach((it: any) => {\n        this.notes.push(new Note(JSON.stringify(it)));\n      });\n      this.generateBaseline();\n      this.notesX.push(1);\n      this.notes.forEach((note, idx) => {\n        let x = Math.pow(2, -note.l);\n        for (let i = 1; i <= note.p; ++i) {\n          x += Math.pow(2, -i);\n        }\n        this.notesX.push(x);\n        this.unitNum += x;\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n  generateBaseline() {\n    for (let i = 0; ; ++i) {\n      let x = 0;\n      let s = 0;\n      let e = -1;\n      this.notes.forEach((it, idx) => {\n        if (it.l > i) {\n          e = idx;\n          x++;\n        } else {\n          if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n          s = idx + 1;\n          e = idx;\n        }\n      });\n      if (s <= e) this.baselineGroup.push({ y: i, s: s, e: e });\n      if (x === 0) {\n        break;\n      }\n    }\n  }\n}\n\nfunction barLine(d: Dimens, clazz: string) {\n  return (\n    <line\n      className={clazz + \"__bar-line\"}\n      x1={d.marginLeft + d.width + d.marginRight}\n      y1={0}\n      x2={d.marginLeft + d.width + d.marginRight}\n      y2={d.height}\n      strokeWidth={1}\n      stroke=\"black\"\n    />\n  );\n}\n\nfunction baseLine(bar: Bar, clazz: string) {\n  return (\n    <g className={clazz + \"__base-line\"}>\n      {bar.baselineGroup.map((it, idx) => (\n        <line\n          key={idx}\n          x1={bar.notes[it.s].dimens.x}\n          y1={bar.notes[it.s].dimens.height + (it.y + 1) * config.pointGap}\n          x2={bar.notes[it.e].dimens.x + bar.notes[it.e].dimens.width}\n          y2={bar.notes[it.s].dimens.height + (it.y + 1) * config.pointGap}\n          stroke={\"black\"}\n          strokeWidth={1}\n        />\n      ))}\n    </g>\n  );\n}\n\nfunction MuseBar(props: { bar: Bar }) {\n  let d = props.bar.dimens;\n  let clazz = \"muse-bar\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {barLine(d, clazz)}\n      {baseLine(props.bar, clazz)}\n      {props.bar.notes.map((it) => (\n        <MuseNote note={it} key={JSON.stringify(it)} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseBar;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseBar, { Bar } from \"./MuseBar\";\nimport { border } from \"./untils\";\n\nexport class Track {\n  bars: Bar[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(json: string) {\n    let o = JSON.parse(json);\n    if (o.bars !== undefined) {\n      o.bars.forEach((it: any) => {\n        this.bars.push(new Bar(JSON.stringify(it)));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction MuseTrack(props: { track: Track }) {\n  let d = props.track.dimens;\n  let clazz = \"muse-track\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {props.track.bars.map((it, idx) => (\n        <MuseBar bar={it} key={idx} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseTrack;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseTrack, { Track } from \"./MuseTrack\";\nimport { border } from \"./untils\";\n\nexport class Line {\n  tracks: Track[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(json: string) {\n    let o = JSON.parse(json);\n    if (o.tracks !== undefined) {\n      o.tracks.forEach((it: any) => {\n        this.tracks.push(new Track(JSON.stringify(it)));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction lineHead(d: Dimens, clazz: string) {\n  return (\n    <g className={clazz + \"__line-head\"}>\n      <line x1={0} y1={0} x2={0} y2={d.height} strokeWidth={1} stroke=\"black\" />\n    </g>\n  );\n}\n\nfunction MuseLine(props: { line: Line }) {\n  let d = props.line.dimens;\n  let clazz = \"muse-line\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {lineHead(d, clazz)}\n      {props.line.tracks.map((it) => (\n        <MuseTrack track={it} key={JSON.stringify(it)} />\n      ))}\n    </g>\n  );\n}\n\nexport default MuseLine;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MuseLine, { Line } from \"./MuseLine\";\nimport { border, outerBorder } from \"./untils\";\n\nexport class Page {\n  lines: Line[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(json: string) {\n    let o = JSON.parse(json);\n    if (o.lines !== undefined) {\n      o.lines.forEach((it: any) => {\n        this.lines.push(new Line(JSON.stringify(it)));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction MusePage(props: { page: Page }) {\n  let d = props.page.dimens;\n  let clazz = \"muse-page\";\n  return (\n    <g\n      className={clazz}\n      transform={\n        \"translate(\" + (d.x - d.marginLeft) + \",\" + (d.y - d.marginTop) + \")\"\n      }\n      width={d.width + d.marginLeft + d.marginRight}\n      height={d.height + d.marginTop + d.marginBottom}\n    >\n      {border(d, clazz)}\n      {outerBorder(d, clazz)}\n      {props.page.lines.map((it) => (\n        <MuseLine line={it} key={JSON.stringify(it)} />\n      ))}\n    </g>\n  );\n}\n\nexport default MusePage;\n","import React from \"react\";\nimport Dimens from \"./Dimens\";\nimport MusePage, { Page } from \"./MusePage\";\nimport { border } from \"./untils\";\n\nexport class Notation {\n  pages: Page[] = [];\n  dimens: Dimens = new Dimens();\n  constructor(json: string) {\n    let o = JSON.parse(json);\n    if (o.pages !== undefined) {\n      o.pages.forEach((it: any) => {\n        this.pages.push(new Page(JSON.stringify(it)));\n      });\n    }\n    if (o.dimens !== undefined) {\n      this.dimens = o.dimens;\n    }\n  }\n}\n\nfunction MuseNotation(props: { notation: Notation }) {\n  let margin = 10;\n  let d = props.notation.dimens;\n  let clazz = \"muse-notation\";\n  return (\n    <svg\n      className=\"muse\"\n      width={props.notation.dimens.width + margin * 2}\n      height={props.notation.dimens.height + margin * 2}\n    >\n      <g\n        className={clazz}\n        transform={\"translate(\" + margin + \",\" + margin + \")\"}\n        width={props.notation.dimens.width}\n        height={props.notation.dimens.height}\n      >\n        {border(d, clazz)}\n        {props.notation.pages.map((it) => (\n          <MusePage page={it} key={JSON.stringify(it)} />\n        ))}\n      </g>\n    </svg>\n  );\n}\n\nexport default MuseNotation;\n","import React from \"react\";\nimport config from \"./config\";\nimport MuseNotation, { Notation } from \"./MuseNotation\";\n\nfunction init(data: string): Notation {\n  let hm = 100;\n  let vm = 100;\n  let w = 800;\n  let h = 1000;\n  let notation = new Notation(data);\n  let notationH = 0;\n  notation.pages.forEach((page, pageIdx) => {\n    page.dimens.x = hm;\n    page.dimens.y = vm * (pageIdx + 1) + (vm + h) * pageIdx;\n    page.dimens.width = w;\n    page.dimens.marginLeft = hm;\n    page.dimens.marginRight = hm;\n    page.dimens.height = h;\n    page.dimens.marginTop = vm;\n    page.dimens.marginBottom = vm;\n    notationH +=\n      page.dimens.marginTop + page.dimens.marginBottom + page.dimens.height;\n    let linesHeight: number[] = [];\n    let lineYSpace = page.dimens.height;\n    page.lines.forEach((line) => {\n      line.dimens.width = page.dimens.width;\n      line.dimens.x = page.dimens.marginLeft;\n      let lineHeight = 0;\n      let trackY = 0;\n      let barsW: number[] = [];\n      line.tracks.forEach((track) => {\n        track.bars.forEach((bar, barIdx) => {\n          if (barsW[barIdx] !== undefined) {\n            barsW[barIdx] =\n              barsW[barIdx] > bar.unitNum ? barsW[barIdx] : bar.unitNum;\n          } else {\n            barsW.push(bar.unitNum);\n          }\n        });\n      });\n      let barUnitSum = barsW.reduce((s, it) => s + it);\n      line.tracks.forEach((track) => {\n        let trackHeight = 0;\n        track.dimens.y = trackY;\n        track.dimens.width = line.dimens.width;\n        let maxNoteHeight = 0; //最大note.y\n        let maxNoteMarginBottom = 0;\n        let barX = 0;\n        track.bars.forEach((bar, barIdx) => {\n          bar.unitNum = barsW[barIdx];\n          bar.dimens.width = (barsW[barIdx] / barUnitSum) * track.dimens.width;\n          bar.dimens.x = barX;\n          barX += bar.dimens.width;\n          let notesWidth: number[] = [];\n          bar.notes.forEach((note) => {\n            note.settle();\n            let noteWidth = note.dimens.width;\n            let noteHeight = note.dimens.height;\n            let noteMarginBootom = note.dimens.marginBottom;\n            maxNoteHeight =\n              maxNoteHeight > noteHeight ? maxNoteHeight : noteHeight;\n            maxNoteMarginBottom =\n              maxNoteMarginBottom > noteMarginBootom\n                ? maxNoteMarginBottom\n                : noteMarginBootom;\n            notesWidth.push(noteWidth);\n          });\n          let x = 0;\n          bar.notes.forEach((note, idx) => {\n            x += (bar.notesX[idx] / (bar.unitNum + 1)) * bar.dimens.width;\n            note.dimens.x = x - config.noteWidth / 2;\n          });\n        });\n        track.dimens.height = maxNoteHeight + maxNoteMarginBottom;\n        track.bars.forEach((bar) => {\n          bar.dimens.height = track.dimens.height;\n          bar.notes.forEach((note) => {\n            note.dimens.height = maxNoteHeight;\n            note.dimens.marginBottom = maxNoteMarginBottom;\n          });\n        });\n        trackHeight = maxNoteHeight + maxNoteMarginBottom;\n        lineHeight += trackHeight + config.trackGap;\n        trackY += trackHeight + config.trackGap;\n      });\n      console.log(barsW); //fghfhgjfghfgfgfgfgfgfgfgfgfgfgfgf\n      lineHeight -= config.trackGap;\n      line.dimens.height = lineHeight;\n      lineYSpace -= lineHeight;\n      linesHeight.push(lineHeight);\n    });\n    let lineYUnit = lineYSpace / (page.lines.length - 1);\n    page.lines.forEach((line, idx) => {\n      let py = page.dimens.marginTop;\n      for (let i = 0; i < idx; ++i) {\n        py += lineYUnit + linesHeight[i];\n      }\n      line.dimens.y = py;\n    });\n  });\n  notation.dimens.width = w + 2 * hm;\n  notation.dimens.height = notationH;\n  return notation;\n}\n\nfunction Muse(props: { data: string; width?: number }) {\n  return <MuseNotation notation={init(props.data)} />;\n}\n\nexport default Muse;\n","import React from \"react\";\nimport \"./App.css\";\nimport Muse from \"./muse/Muse\";\n\nclass App extends React.Component<\n  {},\n  { error: any | null; isLoaded: boolean; data: string }\n> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: \"\",\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"https://cdn.jsdelivr.net/gh/shizuku/muse-react/test/server/b.json\")\n      .then((res) => res.text())\n      .then(\n        (result) => {\n          this.setState({\n            isLoaded: true,\n            data: result,\n          });\n        },\n        (error) => {\n          this.setState({\n            isLoaded: true,\n            error,\n          });\n        }\n      );\n  }\n\n  render() {\n    if (this.state.error) {\n      return <div>error</div>;\n    } else if (!this.state.isLoaded) {\n      return <div>loading...</div>;\n    } else {\n      return (\n        <div className=\"app\">\n          <Muse data={this.state.data} />\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}